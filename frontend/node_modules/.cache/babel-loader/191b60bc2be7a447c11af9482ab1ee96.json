{"ast":null,"code":"import _defineProperty from\"/Users/postgres/Desktop/Tea/teafrontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/postgres/Desktop/Tea/teafrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/postgres/Desktop/Tea/teafrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/postgres/Desktop/Tea/teafrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import csrfFetch from\"../store/csrf\";var ADD_SHARE=\"ADD_SHARE\";var LOAD_SHARE=\"LOAD_SHARE\";var RANDOM_SHARE=\"RANDOM_SHARE\";export var addShare=function addShare(share){return{type:ADD_SHARE,share:share};};export var loadShare=function loadShare(share_id){return{type:LOAD_SHARE,share_id:share_id};};export var randomShare=function randomShare(share){return{type:RANDOM_SHARE,share:share};};export var getShare=function getShare(share_id){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response,share;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return csrfFetch(\"/api/shares/\".concat(share_id));case 2:response=_context.sent;if(!response.ok){_context.next=8;break;}_context.next=6;return response.json();case 6:share=_context.sent;dispatch(loadShare(share));case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getRandomShare=function getRandomShare(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response,share;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return csrfFetch(\"/api/shares/random\");case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:share=_context2.sent;dispatch(randomShare(share));case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var createShare=function createShare(data){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var response,newShare;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return csrfFetch(\"/api/shares\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",accept:\"application/json\"},body:JSON.stringify(data)});case 2:response=_context3.sent;if(!response.ok){_context3.next=8;break;}_context3.next=6;return response.json();case 6:newShare=_context3.sent;dispatch(addShare(newShare));case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};var initialState={};export default function shareReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var newState=_objectSpread({},state);switch(action.type){case ADD_SHARE:case LOAD_SHARE://coming in with share id from back end\nvar newShare=_defineProperty({},action.share_id,action.share);//how do i have access to share when i'm not sending it back?\nreturn _objectSpread(_objectSpread({},newState),newShare);case RANDOM_SHARE:return _objectSpread({},action.share);default:return newState;}}","map":{"version":3,"names":["csrfFetch","ADD_SHARE","LOAD_SHARE","RANDOM_SHARE","addShare","share","type","loadShare","share_id","randomShare","getShare","dispatch","response","ok","json","getRandomShare","createShare","data","method","headers","accept","body","JSON","stringify","newShare","initialState","shareReducer","state","action","newState"],"sources":["/Users/postgres/Desktop/Tea/teafrontend/src/store/share.js"],"sourcesContent":["\n\nimport csrfFetch from \"../store/csrf\"\n\nconst ADD_SHARE = \"ADD_SHARE\";\nconst LOAD_SHARE = \"LOAD_SHARE\";\nconst RANDOM_SHARE = \"RANDOM_SHARE\";\n\nexport const addShare = (share) => ({\n  type: ADD_SHARE,\n  share,\n});\n\nexport const loadShare = (share_id) => ({\n  type: LOAD_SHARE,\n  share_id,\n});\n\nexport const randomShare = (share) => ({\n  type: RANDOM_SHARE,\n  share\n});\n\nexport const getShare = (share_id) => async (dispatch) => {\n  const response = await csrfFetch(`/api/shares/${share_id}`);\n  if (response.ok) {\n    const share = await response.json();\n    dispatch(loadShare(share));\n  }\n};\n\nexport const getRandomShare = () => async (dispatch) => {\n  const response = await csrfFetch(`/api/shares/random`);\n    const share = await response.json();\n    dispatch(randomShare(share));\n  \n};\n\nexport const createShare = (data) => async (dispatch) => {\n  //need to handle default user in the back end in controller\n  const response = await csrfFetch(`/api/shares`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      accept: \"application/json\",\n    },\n    body: JSON.stringify(data),\n  });\n  if (response.ok) {\n    const newShare = await response.json();\n    dispatch(addShare(newShare));\n  }\n};\n\nlet initialState = {};\n\nexport default function shareReducer(state = initialState, action) {\n  const newState = { ...state };\n  switch (action.type) {\n    case ADD_SHARE:\n    case LOAD_SHARE: //coming in with share id from back end\n      const newShare = { [action.share_id]: action.share }; //how do i have access to share when i'm not sending it back?\n      return { ...newState, ...newShare };\n    case RANDOM_SHARE:\n      return {...action.share} ;\n    default:\n      return newState;\n  }\n}\n"],"mappings":"qgBAEA,MAAOA,UAAP,KAAsB,eAAtB,CAEA,GAAMC,UAAS,CAAG,WAAlB,CACA,GAAMC,WAAU,CAAG,YAAnB,CACA,GAAMC,aAAY,CAAG,cAArB,CAEA,MAAO,IAAMC,SAAQ,CAAG,QAAXA,SAAW,CAACC,KAAD,QAAY,CAClCC,IAAI,CAAEL,SAD4B,CAElCI,KAAK,CAALA,KAFkC,CAAZ,EAAjB,CAKP,MAAO,IAAME,UAAS,CAAG,QAAZA,UAAY,CAACC,QAAD,QAAe,CACtCF,IAAI,CAAEJ,UADgC,CAEtCM,QAAQ,CAARA,QAFsC,CAAf,EAAlB,CAKP,MAAO,IAAMC,YAAW,CAAG,QAAdA,YAAc,CAACJ,KAAD,QAAY,CACrCC,IAAI,CAAEH,YAD+B,CAErCE,KAAK,CAALA,KAFqC,CAAZ,EAApB,CAKP,MAAO,IAAMK,SAAQ,CAAG,QAAXA,SAAW,CAACF,QAAD,mGAAc,iBAAOG,QAAP,6JACbX,UAAS,uBAAgBQ,QAAhB,EADI,QAC9BI,QAD8B,mBAEhCA,QAAQ,CAACC,EAFuB,+CAGdD,SAAQ,CAACE,IAAT,EAHc,QAG5BT,KAH4B,eAIlCM,QAAQ,CAACJ,SAAS,CAACF,KAAD,CAAV,CAAR,CAJkC,sDAAd,gEAAjB,CAQP,MAAO,IAAMU,eAAc,CAAG,QAAjBA,eAAiB,qGAAM,kBAAOJ,QAAP,kKACXX,UAAS,sBADE,QAC5BY,QAD4B,uCAEZA,SAAQ,CAACE,IAAT,EAFY,QAE1BT,KAF0B,gBAGhCM,QAAQ,CAACF,WAAW,CAACJ,KAAD,CAAZ,CAAR,CAHgC,wDAAN,kEAAvB,CAOP,MAAO,IAAMW,YAAW,CAAG,QAAdA,YAAc,CAACC,IAAD,oGAAU,kBAAON,QAAP,qKAEZX,UAAS,eAAgB,CAC9CkB,MAAM,CAAE,MADsC,CAE9CC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,MAAM,CAAE,kBAFD,CAFqC,CAM9CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf,CANwC,CAAhB,CAFG,QAE7BL,QAF6B,oBAU/BA,QAAQ,CAACC,EAVsB,iDAWVD,SAAQ,CAACE,IAAT,EAXU,QAW3BU,QAX2B,gBAYjCb,QAAQ,CAACP,QAAQ,CAACoB,QAAD,CAAT,CAAR,CAZiC,wDAAV,kEAApB,CAgBP,GAAIC,aAAY,CAAG,EAAnB,CAEA,cAAe,SAASC,aAAT,EAAoD,IAA9BC,MAA8B,2DAAtBF,YAAsB,IAARG,OAAQ,2CACjE,GAAMC,SAAQ,kBAAQF,KAAR,CAAd,CACA,OAAQC,MAAM,CAACtB,IAAf,EACE,IAAKL,UAAL,CACA,IAAKC,WAAL,CAAiB;AACf,GAAMsB,SAAQ,oBAAMI,MAAM,CAACpB,QAAb,CAAwBoB,MAAM,CAACvB,KAA/B,CAAd,CAAsD;AACtD,sCAAYwB,QAAZ,EAAyBL,QAAzB,EACF,IAAKrB,aAAL,CACE,wBAAWyB,MAAM,CAACvB,KAAlB,EACF,QACE,MAAOwB,SAAP,CARJ,CAUD"},"metadata":{},"sourceType":"module"}