{"ast":null,"code":"import csrfFetch from \"./csrf\";\nconst RECEIVE_CURRENT_USER = 'users/RECEIVE_CURRENT_USER';\nconst REMOVE_CURRENT_USER = 'users/REMOVE_CURRENT_USER';\nexport const receiveCurrentUser = user => ({\n  type: RECEIVE_CURRENT_USER,\n  user\n});\nexport const removeCurrentUser = userId => ({\n  type: REMOVE_CURRENT_USER,\n  userId\n});\nexport const loginUser = user => async dispatch => {\n  let res = await csrfFetch('/api/session', {\n    method: 'POST',\n    body: JSON.stringify(user)\n  });\n  let data = await res.json();\n  dispatch(receiveCurrentUser(data));\n};\nlet currentUser = sessionStorage.getItem('currentUser');\nlet initialState;\n\nif (currentUser) {\n  initialState = {\n    user: JSON.parse(currentUser)\n  };\n} else {\n  initialState = {\n    user: null\n  };\n}\n\nexport const sessionReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  Object.freeze(state);\n  const newState = { ...state\n  };\n\n  switch (action.type) {\n    case RECEIVE_CURRENT_USER:\n      sessionStorage.setItem;\n      return { ...action.payload\n      };\n\n    case REMOVE_CURRENT_USER:\n      delete newState[action.userId];\n      return newState;\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["csrfFetch","RECEIVE_CURRENT_USER","REMOVE_CURRENT_USER","receiveCurrentUser","user","type","removeCurrentUser","userId","loginUser","dispatch","res","method","body","JSON","stringify","data","json","currentUser","sessionStorage","getItem","initialState","parse","sessionReducer","state","action","Object","freeze","newState","setItem","payload"],"sources":["/Users/postgres/Desktop/Tea/teafrontend/src/store/sessionReducer.js"],"sourcesContent":["import csrfFetch from \"./csrf\";\n\nconst RECEIVE_CURRENT_USER = 'users/RECEIVE_CURRENT_USER'\nconst REMOVE_CURRENT_USER = 'users/REMOVE_CURRENT_USER'\n\nexport const receiveCurrentUser = user =>({\n  type: RECEIVE_CURRENT_USER,\n  user\n})\n\nexport const removeCurrentUser = (userId) => ({\n  type: REMOVE_CURRENT_USER,\n  userId\n});\n\n\nexport const loginUser =  (user) => async (dispatch) => {\n   let res = await csrfFetch('/api/session',{\n    method: 'POST',\n    body: JSON.stringify(user)\n   })\n   let data = await res.json();\n   dispatch(receiveCurrentUser(data))\n}\n\nlet currentUser = sessionStorage.getItem('currentUser');\nlet initialState;\nif (currentUser) {\n  initialState = {user :  JSON.parse(currentUser)}\n} else {\n  initialState = {user : null}\n}\n\nexport const sessionReducer = (state = initialState , action) => {\n  Object.freeze(state);\n  const newState = { ...state }\n  switch (action.type) {\n    case RECEIVE_CURRENT_USER:\n      sessionStorage.setItem\n    return {...action.payload}\n    case REMOVE_CURRENT_USER:\n    delete newState[action.userId]\n    return newState\n    default:\n      return state;\n  }\n}"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,QAAtB;AAEA,MAAMC,oBAAoB,GAAG,4BAA7B;AACA,MAAMC,mBAAmB,GAAG,2BAA5B;AAEA,OAAO,MAAMC,kBAAkB,GAAGC,IAAI,KAAI;EACxCC,IAAI,EAAEJ,oBADkC;EAExCG;AAFwC,CAAJ,CAA/B;AAKP,OAAO,MAAME,iBAAiB,GAAIC,MAAD,KAAa;EAC5CF,IAAI,EAAEH,mBADsC;EAE5CK;AAF4C,CAAb,CAA1B;AAMP,OAAO,MAAMC,SAAS,GAAKJ,IAAD,IAAU,MAAOK,QAAP,IAAoB;EACrD,IAAIC,GAAG,GAAG,MAAMV,SAAS,CAAC,cAAD,EAAgB;IACxCW,MAAM,EAAE,MADgC;IAExCC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeV,IAAf;EAFkC,CAAhB,CAAzB;EAIA,IAAIW,IAAI,GAAG,MAAML,GAAG,CAACM,IAAJ,EAAjB;EACAP,QAAQ,CAACN,kBAAkB,CAACY,IAAD,CAAnB,CAAR;AACF,CAPM;AASP,IAAIE,WAAW,GAAGC,cAAc,CAACC,OAAf,CAAuB,aAAvB,CAAlB;AACA,IAAIC,YAAJ;;AACA,IAAIH,WAAJ,EAAiB;EACfG,YAAY,GAAG;IAAChB,IAAI,EAAIS,IAAI,CAACQ,KAAL,CAAWJ,WAAX;EAAT,CAAf;AACD,CAFD,MAEO;EACLG,YAAY,GAAG;IAAChB,IAAI,EAAG;EAAR,CAAf;AACD;;AAED,OAAO,MAAMkB,cAAc,GAAG,YAAmC;EAAA,IAAlCC,KAAkC,uEAA1BH,YAA0B;EAAA,IAAXI,MAAW;EAC/DC,MAAM,CAACC,MAAP,CAAcH,KAAd;EACA,MAAMI,QAAQ,GAAG,EAAE,GAAGJ;EAAL,CAAjB;;EACA,QAAQC,MAAM,CAACnB,IAAf;IACE,KAAKJ,oBAAL;MACEiB,cAAc,CAACU,OAAf;MACF,OAAO,EAAC,GAAGJ,MAAM,CAACK;MAAX,CAAP;;IACA,KAAK3B,mBAAL;MACA,OAAOyB,QAAQ,CAACH,MAAM,CAACjB,MAAR,CAAf;MACA,OAAOoB,QAAP;;IACA;MACE,OAAOJ,KAAP;EARJ;AAUD,CAbM"},"metadata":{},"sourceType":"module"}