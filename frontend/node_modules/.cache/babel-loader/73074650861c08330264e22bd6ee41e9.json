{"ast":null,"code":"export const restoreCSRF = async () => {\n  const result = await csrfFetch('/api/session');\n  storeToken(result);\n  return result;\n};\nexport const restoreCurrentUser = async () => {\n  const result = await csrfFetch('');\n}; // also add \n// lose state by refreshing page. \n// set user id session storage \n\nexport const storeToken = response => {\n  const token = response.headers.get('X-CSRF-Token');\n  console.log('testing in store token');\n  if (token) sessionStorage.setItem('X-CSRF-Token', token);\n}; // we can do restoreSession().then ( () => { put reactDom.render ( <components that need>)})\n// const initialize app => \n// restoreSession().then(initializeapp\n//token needs to match usear in the back )\n\nconst csrfFetch = async function (url) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  options.method ||= 'GET';\n  options.headers ||= {};\n\n  if (options.method.toUpperCase() !== 'GET') {\n    options.headers['Content-Type'] = 'application/json';\n    options.headers[\"Accept\"] = 'application/json';\n    options.headers['X-CSRF-Token'] = sessionStorage.getItem('X-CSRF-Token');\n  }\n\n  const res = await fetch(url, options);\n  if (res.status >= 400) throw res;\n  return res;\n};\n\nexport default csrfFetch;","map":{"version":3,"names":["restoreCSRF","result","csrfFetch","storeToken","restoreCurrentUser","response","token","headers","get","console","log","sessionStorage","setItem","url","options","method","toUpperCase","getItem","res","fetch","status"],"sources":["/Users/postgres/Desktop/Tea/teafrontend/src/store/csrf.js"],"sourcesContent":[" export  const restoreCSRF = async () => {\n  const result = await csrfFetch('/api/session')\n  storeToken(result);\n  return result;\n }; \n \n export const restoreCurrentUser = async () => {\n  const result = await csrfFetch('')\n }// also add \n\n // lose state by refreshing page. \n // set user id session storage \n\n export const storeToken = (response) =>{\n  const token = response.headers.get('X-CSRF-Token');\n  console.log('testing in store token', )\n  if (token) sessionStorage.setItem('X-CSRF-Token', token);\n }\n \n\n // we can do restoreSession().then ( () => { put reactDom.render ( <components that need>)})\n// const initialize app => \n// restoreSession().then(initializeapp\n//token needs to match usear in the back )\n\n const csrfFetch = async (url,options ={}) => {\n  options.method ||= 'GET';\n  options.headers ||= {};\n\nif (options.method.toUpperCase() !== 'GET'){\n      options.headers['Content-Type'] = 'application/json';\n      options.headers[\"Accept\"] = 'application/json';\n      options.headers['X-CSRF-Token'] = sessionStorage.getItem('X-CSRF-Token');\n  }\n  const res = await fetch(url,options);\n  if (res.status >= 400) throw res;\n  return res\n }\n\n export default csrfFetch;"],"mappings":"AAAC,OAAQ,MAAMA,WAAW,GAAG,YAAY;EACvC,MAAMC,MAAM,GAAG,MAAMC,SAAS,CAAC,cAAD,CAA9B;EACAC,UAAU,CAACF,MAAD,CAAV;EACA,OAAOA,MAAP;AACA,CAJO;AAMR,OAAO,MAAMG,kBAAkB,GAAG,YAAY;EAC7C,MAAMH,MAAM,GAAG,MAAMC,SAAS,CAAC,EAAD,CAA9B;AACA,CAFM,C,CAEN;AAED;AACA;;AAEA,OAAO,MAAMC,UAAU,GAAIE,QAAD,IAAa;EACtC,MAAMC,KAAK,GAAGD,QAAQ,CAACE,OAAT,CAAiBC,GAAjB,CAAqB,cAArB,CAAd;EACAC,OAAO,CAACC,GAAR,CAAY,wBAAZ;EACA,IAAIJ,KAAJ,EAAWK,cAAc,CAACC,OAAf,CAAuB,cAAvB,EAAuCN,KAAvC;AACX,CAJM,C,CAOP;AACD;AACA;AACA;;AAEC,MAAMJ,SAAS,GAAG,gBAAOW,GAAP,EAA2B;EAAA,IAAhBC,OAAgB,uEAAP,EAAO;EAC5CA,OAAO,CAACC,MAAR,KAAmB,KAAnB;EACAD,OAAO,CAACP,OAAR,KAAoB,EAApB;;EAEF,IAAIO,OAAO,CAACC,MAAR,CAAeC,WAAf,OAAiC,KAArC,EAA2C;IACrCF,OAAO,CAACP,OAAR,CAAgB,cAAhB,IAAkC,kBAAlC;IACAO,OAAO,CAACP,OAAR,CAAgB,QAAhB,IAA4B,kBAA5B;IACAO,OAAO,CAACP,OAAR,CAAgB,cAAhB,IAAkCI,cAAc,CAACM,OAAf,CAAuB,cAAvB,CAAlC;EACH;;EACD,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACN,GAAD,EAAKC,OAAL,CAAvB;EACA,IAAII,GAAG,CAACE,MAAJ,IAAc,GAAlB,EAAuB,MAAMF,GAAN;EACvB,OAAOA,GAAP;AACA,CAZD;;AAcA,eAAehB,SAAf"},"metadata":{},"sourceType":"module"}