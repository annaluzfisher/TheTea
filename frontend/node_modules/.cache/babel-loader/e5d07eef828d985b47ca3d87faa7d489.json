{"ast":null,"code":"import _regeneratorRuntime from\"/Users/postgres/Desktop/Tea/teafrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/postgres/Desktop/Tea/teafrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/postgres/Desktop/Tea/teafrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import\"./Share.css\";import{useState}from'react';import{createShare}from\"../../store/share\";import{useHistory}from\"react-router-dom\";import{useDispatch}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Share(){var dispatch=useDispatch();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errorMessages=_useState2[0],setErrorMessages=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),user_id=_useState4[0],setUserId=_useState4[1];//should be getting the user id from session. perhaps in controller\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];// const [share, setShare ] = useState({});\nvar history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var share,newShare;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();share={share:{user_id:user_id,content:content}};_context.prev=2;_context.next=5;return dispatch(createShare(share));case 5:newShare=_context.sent;_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);setErrorMessages({overall:_context.t0.errors});case 11:if(newShare){setErrorMessages({});history.push(\"share/\".concat(share.id));}case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,8]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"form-wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Spill the tea ...\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"textarea\",placeholder:\"Share a thought, secret or a short story...\",onChange:function onChange(e){return setContent(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",name:\"\",value:\"Give us the Tea!\"})]})});}export default Share;","map":{"version":3,"names":["React","useState","createShare","useHistory","useDispatch","Share","dispatch","errorMessages","setErrorMessages","user_id","setUserId","content","setContent","history","handleSubmit","e","preventDefault","share","newShare","overall","errors","push","id","target","value"],"sources":["/Users/postgres/Desktop/Tea/teafrontend/src/components/Share/Share.js"],"sourcesContent":["import React from 'react'\nimport \"./Share.css\";\nimport { useState } from 'react'\nimport { createShare } from \"../../store/share\"\nimport { useHistory } from \"react-router-dom\"\nimport { useDispatch } from 'react-redux'\n\nfunction Share() {\n  const dispatch = useDispatch();\n  const [errorMessages, setErrorMessages] = useState({});\n  const [user_id, setUserId] = useState(1) //should be getting the user id from session. perhaps in controller\n  const [content, setContent ] = useState('');\n  // const [share, setShare ] = useState({});\n  const history = useHistory();\n\n  \n  const handleSubmit = async (e) =>{\n    e.preventDefault();\n    \n    const share = {\n      share:  {\n      user_id: user_id,\n      content: content,}\n    };\n       \n    let newShare;\n    try {\n      newShare = await  dispatch(createShare(share)) // no need to add share because it's included in create share?\n    } catch (error) {\n      setErrorMessages({ overall: error.errors})\n    }\n    if (newShare){\n      setErrorMessages({});\n      history.push(`share/${share.id}`);\n    }\n  }\n\n  return (\n    <div className='form-wrapper'>\n      <form className='form' onSubmit={handleSubmit}>\n        <label>Spill the tea ...</label>\n        <textarea type=\"textarea\" placeholder=\"Share a thought, secret or a short story...\"onChange={(e) => setContent(e.target.value)}/>\n       <input type=\"submit\" name=\"\" value=\"Give us the Tea!\"/>\n      </form>\n    </div>\n  )\n}\n\nexport default Share"],"mappings":"uYAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAO,aAAP,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,WAAT,KAA4B,mBAA5B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,WAAT,KAA4B,aAA5B,C,wFAEA,QAASC,MAAT,EAAiB,CACf,GAAMC,SAAQ,CAAGF,WAAW,EAA5B,CACA,cAA0CH,QAAQ,CAAC,EAAD,CAAlD,wCAAOM,aAAP,eAAsBC,gBAAtB,eACA,eAA6BP,QAAQ,CAAC,CAAD,CAArC,yCAAOQ,OAAP,eAAgBC,SAAhB,eAAyC;AACzC,eAA+BT,QAAQ,CAAC,EAAD,CAAvC,yCAAOU,OAAP,eAAgBC,UAAhB,eACA;AACA,GAAMC,QAAO,CAAGV,UAAU,EAA1B,CAGA,GAAMW,aAAY,4FAAG,iBAAOC,CAAP,uIACnBA,CAAC,CAACC,cAAF,GAEMC,KAHa,CAGL,CACZA,KAAK,CAAG,CACRR,OAAO,CAAEA,OADD,CAERE,OAAO,CAAEA,OAFD,CADI,CAHK,uCAWCL,SAAQ,CAACJ,WAAW,CAACe,KAAD,CAAZ,CAXT,QAWjBC,QAXiB,8FAajBV,gBAAgB,CAAC,CAAEW,OAAO,CAAE,YAAMC,MAAjB,CAAD,CAAhB,CAbiB,QAenB,GAAIF,QAAJ,CAAa,CACXV,gBAAgB,CAAC,EAAD,CAAhB,CACAK,OAAO,CAACQ,IAAR,iBAAsBJ,KAAK,CAACK,EAA5B,GACD,CAlBkB,oEAAH,kBAAZR,aAAY,4CAAlB,CAqBA,mBACE,YAAK,SAAS,CAAC,cAAf,uBACE,cAAM,SAAS,CAAC,MAAhB,CAAuB,QAAQ,CAAEA,YAAjC,wBACE,4CADF,cAEE,iBAAU,IAAI,CAAC,UAAf,CAA0B,WAAW,CAAC,6CAAtC,CAAmF,QAAQ,CAAE,kBAACC,CAAD,QAAOH,WAAU,CAACG,CAAC,CAACQ,MAAF,CAASC,KAAV,CAAjB,EAA7F,EAFF,cAGC,cAAO,IAAI,CAAC,QAAZ,CAAqB,IAAI,CAAC,EAA1B,CAA6B,KAAK,CAAC,kBAAnC,EAHD,GADF,EADF,CASD,CAED,cAAenB,MAAf"},"metadata":{},"sourceType":"module"}