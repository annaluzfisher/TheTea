{"ast":null,"code":"import csrfFetch from \"./csrf\";\nconst RECEIVE_CURRENT_USER = 'users/RECEIVE_CURRENT_USER';\nconst REMOVE_CURRENT_USER = 'users/REMOVE_CURRENT_USER';\nexport const receiveCurrentUser = user => ({\n  type: RECEIVE_CURRENT_USER,\n  user\n});\nexport const removeCurrentUser = user => ({\n  type: REMOVE_CURRENT_USER,\n  user\n});\nexport const loginUser = user => async dispatch => {\n  let res = await csrfFetch('/api/session', {\n    method: 'POST',\n    body: JSON.stringify(user)\n  }).then(res => res.json()).then(res => dispatch(receiveCurrentUser(res))).catch(err => console.log(err));\n};\nconst currentUser = sessionStorage.getItem('currentUser');\nlet inital;\n\nif (currentUser) {}\n\nexport const sessionReducer = function () {\n  let initialState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  Object.freeze(state);\n  let newState = { ...state\n  };\n\n  switch (action.type) {\n    case RECEIVE_CURRENT_USER:\n      return { ...newState,\n        ...action.user\n      };\n\n    case REMOVE_CURRENT_USER:\n      newState = {\n        user: null\n      };\n      return newState;\n\n    default:\n      return newState;\n  }\n}; // session reducer is only one slice of state","map":{"version":3,"names":["csrfFetch","RECEIVE_CURRENT_USER","REMOVE_CURRENT_USER","receiveCurrentUser","user","type","removeCurrentUser","loginUser","dispatch","res","method","body","JSON","stringify","then","json","catch","err","console","log","currentUser","sessionStorage","getItem","inital","sessionReducer","initialState","action","Object","freeze","state","newState"],"sources":["/Users/postgres/Desktop/Tea/teafrontend/src/store/sessionReducer.js"],"sourcesContent":["import csrfFetch from \"./csrf\";\n\nconst RECEIVE_CURRENT_USER = 'users/RECEIVE_CURRENT_USER'\nconst REMOVE_CURRENT_USER = 'users/REMOVE_CURRENT_USER'\n\nexport const receiveCurrentUser = user =>({\n  type: RECEIVE_CURRENT_USER,\n  user\n})\n\nexport const removeCurrentUser = (user) => ({\n  type: REMOVE_CURRENT_USER,\n  user\n});\n\n\nexport const loginUser =  (user) => async (dispatch) => {\n   let res = await csrfFetch('/api/session',{\n    method: 'POST',\n    body: JSON.stringify(user)\n   }).then((res) => res.json()).then((res) => dispatch(receiveCurrentUser(res)))\n   .catch((err) => console.log(err));\n}\nconst currentUser = sessionStorage.getItem('currentUser')\nlet inital\nif (currentUser){\n  \n}\n\nexport const sessionReducer = (initialState = {}, action) => {\n  Object.freeze(state);\n  let newState = { ...state }\n  switch (action.type) {\n    case RECEIVE_CURRENT_USER:\n    return {...newState,...action.user}\n    case REMOVE_CURRENT_USER:\n    newState = {user: null}\n    return newState\n    default:\n      return newState;\n  }\n}\n\n// session reducer is only one slice of state "],"mappings":"AAAA,OAAOA,SAAP,MAAsB,QAAtB;AAEA,MAAMC,oBAAoB,GAAG,4BAA7B;AACA,MAAMC,mBAAmB,GAAG,2BAA5B;AAEA,OAAO,MAAMC,kBAAkB,GAAGC,IAAI,KAAI;EACxCC,IAAI,EAAEJ,oBADkC;EAExCG;AAFwC,CAAJ,CAA/B;AAKP,OAAO,MAAME,iBAAiB,GAAIF,IAAD,KAAW;EAC1CC,IAAI,EAAEH,mBADoC;EAE1CE;AAF0C,CAAX,CAA1B;AAMP,OAAO,MAAMG,SAAS,GAAKH,IAAD,IAAU,MAAOI,QAAP,IAAoB;EACrD,IAAIC,GAAG,GAAG,MAAMT,SAAS,CAAC,cAAD,EAAgB;IACxCU,MAAM,EAAE,MADgC;IAExCC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf;EAFkC,CAAhB,CAAT,CAGbU,IAHa,CAGPL,GAAD,IAASA,GAAG,CAACM,IAAJ,EAHD,EAGaD,IAHb,CAGmBL,GAAD,IAASD,QAAQ,CAACL,kBAAkB,CAACM,GAAD,CAAnB,CAHnC,EAIfO,KAJe,CAIRC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAJA,CAAhB;AAKF,CANM;AAOP,MAAMG,WAAW,GAAGC,cAAc,CAACC,OAAf,CAAuB,aAAvB,CAApB;AACA,IAAIC,MAAJ;;AACA,IAAIH,WAAJ,EAAgB,CAEf;;AAED,OAAO,MAAMI,cAAc,GAAG,YAA+B;EAAA,IAA9BC,YAA8B,uEAAf,EAAe;EAAA,IAAXC,MAAW;EAC3DC,MAAM,CAACC,MAAP,CAAcC,KAAd;EACA,IAAIC,QAAQ,GAAG,EAAE,GAAGD;EAAL,CAAf;;EACA,QAAQH,MAAM,CAACrB,IAAf;IACE,KAAKJ,oBAAL;MACA,OAAO,EAAC,GAAG6B,QAAJ;QAAa,GAAGJ,MAAM,CAACtB;MAAvB,CAAP;;IACA,KAAKF,mBAAL;MACA4B,QAAQ,GAAG;QAAC1B,IAAI,EAAE;MAAP,CAAX;MACA,OAAO0B,QAAP;;IACA;MACE,OAAOA,QAAP;EAPJ;AASD,CAZM,C,CAcP"},"metadata":{},"sourceType":"module"}