{"ast":null,"code":"import _objectSpread from\"/Users/postgres/Desktop/Tea/teafrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/postgres/Desktop/Tea/teafrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/postgres/Desktop/Tea/teafrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import csrfFetch from\"./csrf\";var RECEIVE_USER='RECEIVE_USER';var DELETE_USER='DELETE_USER';export var receiveUser=function receiveUser(user){return{type:RECEIVE_USER,user:user};};export var deleteUser=function deleteUser(userId){return{type:DELETE_USER,userId:userId};};export var createUser=function createUser(user){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var res,newUser;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return csrfFetch('/api/users',{method:\"POST\",body:JSON.stringify(user)});case 2:res=_context.sent;if(!res.ok){_context.next=10;break;}_context.next=6;return res.json();case 6:newUser=_context.sent;dispatch(receiveUser(newUser));_context.next=11;break;case 10:console.log('error result',res);case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};var userReducer=function userReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var action=arguments.length>1?arguments[1]:undefined;Object.freeze(state);var newState=_objectSpread({},state);switch(action.type){case RECEIVE_USER:return _objectSpread(_objectSpread({},newState),action.user);case DELETE_USER:delete newState[action.userId];return newState;default:return newState;}};export default userReducer;","map":{"version":3,"names":["csrfFetch","RECEIVE_USER","DELETE_USER","receiveUser","user","type","deleteUser","userId","createUser","dispatch","method","body","JSON","stringify","res","ok","json","newUser","console","log","userReducer","state","action","Object","freeze","newState"],"sources":["/Users/postgres/Desktop/Tea/teafrontend/src/store/user.js"],"sourcesContent":["import csrfFetch from \"./csrf\";\n\nconst RECEIVE_USER = 'RECEIVE_USER';\nconst DELETE_USER = 'DELETE_USER';\n\n\nexport const receiveUser = (user) =>({\n  type: RECEIVE_USER,\n  user\n})\n\nexport const deleteUser = (userId) => ({\n  type: DELETE_USER,\n  userId,\n});\n\nexport const createUser = (user) => async dispatch =>{\n\n  const res = await csrfFetch('/api/users', {\n    method: \"POST\",\n    body: JSON.stringify(user)\n  })\n  if (res.ok){\n  const newUser = await res.json();\n  dispatch(receiveUser(newUser))\n  } else {\n    console.log('error result',res)\n  }\n  \n}\n\n\n const userReducer = (state = {}, action) => {\n  Object.freeze(state);\n  const newState = { ...state }\n  switch(action.type){\n    case RECEIVE_USER:\n      return {...newState,...action.user};\n    case DELETE_USER:\n      delete newState[action.userId]\n      return newState;\n    default:\n      return newState;\n  }\n}\nexport default userReducer;"],"mappings":"sYAAA,MAAOA,UAAP,KAAsB,QAAtB,CAEA,GAAMC,aAAY,CAAG,cAArB,CACA,GAAMC,YAAW,CAAG,aAApB,CAGA,MAAO,IAAMC,YAAW,CAAG,QAAdA,YAAc,CAACC,IAAD,QAAU,CACnCC,IAAI,CAAEJ,YAD6B,CAEnCG,IAAI,CAAJA,IAFmC,CAAV,EAApB,CAKP,MAAO,IAAME,WAAU,CAAG,QAAbA,WAAa,CAACC,MAAD,QAAa,CACrCF,IAAI,CAAEH,WAD+B,CAErCK,MAAM,CAANA,MAFqC,CAAb,EAAnB,CAKP,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAa,CAACJ,IAAD,mGAAU,iBAAMK,QAAN,0JAEhBT,UAAS,CAAC,YAAD,CAAe,CACxCU,MAAM,CAAE,MADgC,CAExCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAFkC,CAAf,CAFO,QAE5BU,GAF4B,mBAM9BA,GAAG,CAACC,EAN0B,gDAOZD,IAAG,CAACE,IAAJ,EAPY,QAO5BC,OAP4B,eAQlCR,QAAQ,CAACN,WAAW,CAACc,OAAD,CAAZ,CAAR,CARkC,+BAUhCC,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA2BL,GAA3B,EAVgC,uDAAV,gEAAnB,CAgBN,GAAMM,YAAW,CAAG,QAAdA,YAAc,EAAwB,IAAvBC,MAAuB,2DAAf,EAAe,IAAXC,OAAW,2CAC3CC,MAAM,CAACC,MAAP,CAAcH,KAAd,EACA,GAAMI,SAAQ,kBAAQJ,KAAR,CAAd,CACA,OAAOC,MAAM,CAACjB,IAAd,EACE,IAAKJ,aAAL,CACE,sCAAWwB,QAAX,EAAuBH,MAAM,CAAClB,IAA9B,EACF,IAAKF,YAAL,CACE,MAAOuB,SAAQ,CAACH,MAAM,CAACf,MAAR,CAAf,CACA,MAAOkB,SAAP,CACF,QACE,MAAOA,SAAP,CAPJ,CASD,CAZA,CAaD,cAAeL,YAAf"},"metadata":{},"sourceType":"module"}